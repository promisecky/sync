##### 整体输出内容说明

###### 1. 分簇结果输出

进行每轮大循环时，会依次执行分簇、簇间同步、簇间同步三个过程。首先会输出大循环轮数，以及分簇的结果。各个节点距离簇首头的距离和RSS，簇间同步和簇内同步将根据分簇结果进行。

![整体输出](https://github.com/promisecky/sync/assets/61641722/1f2424d6-8283-44c7-a4c7-4261b993f6a0)


###### 2. 簇间同步输出

![效果图](https://github.com/promisecky/sync/assets/61641722/bf3285d9-afd8-42e8-830e-bc3e5fc3f860)


1. 根节点和簇头节点通过TPSN算法实现时间同步，簇头节点接收到根节点发送的sync_ack信号后，会将接收到的信号内容输出，并结合算法算出delta，并输出使用delta对误差原始误差修正之后的时间误差、同步的轮数。

```
10 receive : '10,4032213.385201,4020026.634125,4030026.634125,0' from 195.1.1.1
delta = -12222.05
误差：0.80
原始误差：12221.25
第 0 轮
```

2. 在最后一轮同步时，簇头节点除了输出上述输出外，还会额外输出同步之后的节点平均误差、以及该簇头经过多次时间同步之后的最终误差。

```
10 receive : '10,4112496.183283,4100308.688021,4110308.688021,4' from 195.1.1.1
delta = -12221.30
误差：0.05
原始误差：12221.25
第 4 轮
节点平均误差: 0.16

簇头节点10的同步后误差-0.05
```

###### 3. 簇内同步输出

<img width="1280" alt="簇内输出" src="https://github.com/promisecky/sync/assets/61641722/e9e68d13-7af3-4f4c-abad-a019ab8e70b4">


1. 簇头无人机向簇内无人机广播时间同步发起信号cm_reference（具体算法详情见**基于分簇的无人机自组网节点时间同步算法**文档），然后簇内无人机接收到该信号后，会输出该信号传递的信息，如下所示。

```
1 receive : '4254671.398686,11,6,reference' from 195.1.1.11
2 receive : '4254671.398686,11,6,reference' from 195.1.1.11
11 receive : '4254671.398686,11,6,reference' from 195.1.1.11
参考节点为：11
12 receive : '4254671.398686,11,6,reference' from 195.1.1.11
```

簇内无人机所收到的信息中，如`'4254671.398686,11,6,reference'`。第一个`'4254671.398686'`表示簇头发送cm_referece信号的本地时间T1；第二个`'11'`表示参考节点的代号；第三个`'6'`表示此时所进行的轮数；第四个`'reference'`表示这是cm_reference信号。

2. 参考节点向簇头无人机发送cm_ack，簇头无人机接收到该信号后，会输出该信号传递的信息，如下所示。

```
10 receive : '4254671.398686,4271419.597275,4281419.597275,11,6' from 195.1.1.12
```

簇头无人机所收到的信息中，第一个`'4254671.398686'`是指簇头无人机的本地时间T1；第二个`'4271419.597275'`是参考节点的接收到cm_reference的本地时间T2j；第三个`'4281419.597275'`是参考节点发送cm_ack的本地时间T3；第四个`'11'`是参考节点代号；第五个`'6'`是此时所进行的同步轮数。`'196.1.1.12'`是参考节点11的IP地址。

3. 簇头无人机向簇内其他节点广播cm_sync信号，其他簇内节点收到后，会输出接收到的cm_sync信号传递的信息，并通过逻辑时钟计算误差，如下所示。

```
1 receive : '4271419.597275,16715.457479,6,sync,11' from 195.1.1.11
误差：3.94 ,轮数：6
2 receive : '4271419.597275,16715.457479,6,sync,11' from 195.1.1.11
误差：0.12 ,轮数：6
11 receive : '4271419.597275,16715.457479,6,sync,11' from 195.1.1.11
误差：0.18 ,轮数：6
12 receive : '4271419.597275,16715.457479,6,sync,11' from 195.1.1.11
误差：2.38 ,轮数：6
簇内最终平均误差：1.65
本次同步用时：0.26秒
```

簇内节点接收到的信息中，第一个`'4271419.597275'`是参考节点的接收到cm_reference的本地时间T2j；第二个`'16715.457479'`是delta；第三个`'6'`是此时进行的同步轮数；第四个`'sync'`表示这是cm_sync信号。其输出的误差是指换算逻辑时间之后，该节点逻辑时间和基准时间之间的差的绝对值，单位是微秒，这个误差会随着同步轮数的增大而减小。在簇内所有节点同步完成后，程序会计算簇内同步的平均误差1.65微秒，并且会输出从分簇开始到簇内时间同步完成经过的时间0.26秒。
